import{g as X,u as Z,h as T,i as ee,t as ae,j as te,k as C,l as E,m as t,n as se,p as I,q as le,R as B,s as re,v as oe,x as ne,y as pe,z as ie,A as P,B as _,C as ue,D as ce,E as he,F as me,G as ve,H as de,I as O,J as ge,K as R,L as ye,P as be}from"./app-BvBJhfC0.js";const fe=["/","/about/","/about/me.html","/about/website.html","/about/guestbook.html","/en/intro.html","/en/","/developer/","/favorite/","/favorite/schedule.html","/informalessay/","/posts/catalog.html","/posts/","/sap/","/sap/tcode.html","/sap/table.html","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/page.html","/en/demo/","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/developer/algorithm/","/developer/algorithm/begin.html","/developer/python/","/developer/python/eptile.html","/developer/golang/begin.html","/developer/golang/htmltopdf.html","/developer/golang/","/developer/shell/bash.html","/developer/shell/","/developer/shell/begin.html","/favorite/blog/","/favorite/blog/help.html","/favorite/blog/template.html","/favorite/blog/plug_in.html","/favorite/links/5.software.html","/favorite/links/friend.html","/favorite/links/","/favorite/links/study.html","/favorite/links/tool.html","/sap/abap/cds.html","/informalessay/tattle/confusion.html","/informalessay/tattle/emotion.html","/informalessay/tattle/","/sap/abap/fioribeginner.html","/sap/fico/operations.html","/sap/fico/ficoknowledge.html","/sap/fico/co-cca.html","/sap/fico/accountdetermination.html","/sap/abap/mmoperations.html","/sap/abap/odatabeginner.html","/sap/abap/sdstudy.html","/sap/pp/ppoperationandmaintenance.html","/sap/abap/ppstudy.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/sap/abap/ftp.html","/sap/abap/interface.html","/sap/abap/api.html","/sap/abap/ynkj.html","/sap/abap/odata.html","/sap/abap/certificate.html","/sap/abap/mail.html","/sap/abap/javajar.html","/sap/abap/pointerfacetype.html","/sap/abap/commonenglishabbreviations.html","/sap/abap/smartfoems.html","/sap/abap/shelp.html","/sap/abap/goodgrammar.html","/sap/abap/project.html","/sap/abap/getattachment.html","/sap/abap/changerecord.html","/sap/abap/screenshots.html","/sap/abap/materialpriceanalysis.html","/sap/abap/port.html","/sap/abap/replace.html","/sap/abap/idocedi.html","/sap/abap/rfits.html","/sap/abap/table.html","/sap/abap/breakpoint.html","/sap/abap/automaticjobreporting.html","/sap/abap/integratewechatwork.html","/sap/abap/sapmail.html","/sap/abap/datefunction.html","/sap/abap/interviewabap.html","/sap/abap/porestful.html","/sap/abap/sche_task.html","/sap/abap/bapi.html","/sap/abap/ranges.html","/sap/abap/rest.html","/sap/abap/droplist.html","/sap/abap/po.html","/sap/abap/","/sap/abap/wcs/agv-sap-integration.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/404.html","/en/posts/","/sap/fico/","/sap/pp/","/en/posts/apple/","/sap/abap/wcs/","/en/posts/banana/","/category/","/category/%E5%8D%9A%E5%AE%A2/","/category/sap/","/category/%E9%9A%8F%E7%AC%94/","/en/category/","/en/category/guide/","/en/category/cherry/","/en/category/dragon-fruit/","/en/category/fruit/","/en/category/strawberry/","/en/category/vegetable/","/en/category/apple/","/en/category/banana/","/tag/","/tag/%E7%9B%AE%E5%BD%95/","/tag/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/","/tag/abap/","/tag/cds/","/tag/fiori/","/tag/fico/","/tag/mm/","/tag/odata/","/tag/sd/","/tag/pp/","/tag/ftp/","/tag/api/","/tag/po/","/tag/basis/","/tag/java/","/tag/rest/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/page-config/","/en/tag/guide/","/en/tag/red/","/en/tag/small/","/en/tag/round/","/en/tag/big/","/en/tag/yellow/","/en/tag/curly/","/en/tag/long/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],ke="SEARCH_PRO_QUERY_HISTORY",g=O(ke,[]),we=()=>{const{queryHistoryCount:l}=R;return{enabled:l>0,queryHistory:g,addQueryHistory:n=>{g.value=Array.from(new Set([n,...g.value.slice(0,l-1)]))},removeQueryHistory:n=>{g.value=[...g.value.slice(0,n),...g.value.slice(n+1)]}}},S=l=>fe[l.id]+("anchor"in l?`#${l.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,y=O(He,[]),Ee=()=>({enabled:$>0,resultHistory:y,addResultHistory:r=>{{const n={link:S(r),display:r.display};"header"in r&&(n.header=r.header),y.value=[n,...y.value.slice(0,$-1)]}},removeResultHistory:r=>{y.value=[...y.value.slice(0,r),...y.value.slice(r+1)]}}),Re=l=>{const r=ue(),n=T(),A=ce(),p=C(0),b=E(()=>p.value>0),h=he([]);return me(()=>{const{search:Q,terminate:m}=ve(),f=ye(d=>{const k=d.join(" "),{searchFilter:v=s=>s,splitWord:j,suggestionsFilter:o,...i}=r.value;k?(p.value+=1,Q(d.join(" "),n.value,i).then(s=>v(s,k,n.value,A.value)).then(s=>{p.value-=1,h.value=s}).catch(s=>{console.warn(s),p.value-=1,p.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay);I([l,n],([d])=>f(d),{immediate:!0}),de(()=>{m()})}),{isSearching:b,results:h}};var Qe=X({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const n=Z(),A=T(),p=ee(be),{addQueryHistory:b,queryHistory:h,removeQueryHistory:Q}=we(),{resultHistory:m,addResultHistory:f,removeResultHistory:d}=Ee(),k=ae(l,"queries"),{results:v,isSearching:j}=Re(k),o=te({isQuery:!0,index:0}),i=C(0),s=C(0),L=E(()=>h.value.length>0||m.value.length>0),q=E(()=>v.value.length>0),x=E(()=>v.value[i.value]||null),U=()=>{const{isQuery:e,index:a}=o;a===0?(o.isQuery=!e,o.index=e?m.value.length-1:h.value.length-1):o.index=a-1},Y=()=>{const{isQuery:e,index:a}=o;a===(e?h.value.length-1:m.value.length-1)?(o.isQuery=!e,o.index=0):o.index=a+1},M=()=>{i.value=i.value>0?i.value-1:v.value.length-1,s.value=x.value.contents.length-1},z=()=>{i.value=i.value<v.value.length-1?i.value+1:0,s.value=0},G=()=>{s.value<x.value.contents.length-1?s.value+=1:z()},J=()=>{s.value>0?s.value-=1:M()},D=e=>e.map(a=>ge(a)?a:t(a[0],a[1])),K=e=>{if(e.type==="customField"){const a=pe[e.index]||"$content",[u,H=""]=ie(a)?a[A.value].split("$content"):a.split("$content");return e.display.map(c=>t("div",D([u,...c,H])))}return e.display.map(a=>t("div",D(a)))},w=()=>{i.value=0,s.value=0,r("updateQuery",""),r("close")},V=()=>t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},p.value.queryHistory),h.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===a}],onClick:()=>{r("updateQuery",e)}},[t(P,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:u=>{u.preventDefault(),u.stopPropagation(),Q(a)}})]))])),N=()=>t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},p.value.resultHistory),m.value.map((e,a)=>t(B,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===a}],onClick:()=>{w()}},()=>[t(P,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(u=>D(u)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:u=>{u.preventDefault(),u.stopPropagation(),d(a)}})]))]));return se("keydown",e=>{if(l.isFocusing){if(q.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const a=x.value.contents[s.value];b(l.queries.join(" ")),f(a),n.push(S(a)),w()}}else if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:a}=o;o.isQuery?(r("updateQuery",h.value[a]),e.preventDefault()):(n.push(m.value[a].link),w())}}}),I([i,s],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!q.value:!L.value}],id:"search-pro-results"},l.queries.length?j.value?t(le,{hint:p.value.searching}):q.value?t("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:a},u)=>{const H=i.value===u;return t("li",{class:["search-pro-result-list-item",{active:H}]},[t("div",{class:"search-pro-result-title"},e||p.value.defaultTitle),a.map((c,W)=>{const F=H&&s.value===W;return t(B,{to:S(c),class:["search-pro-result-item",{active:F,"aria-selected":F}],onClick:()=>{b(l.queries.join(" ")),f(c),w()}},()=>[c.type==="text"?null:t(c.type==="title"?re:c.type==="heading"?oe:ne,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?t("div",{class:"content-header"},c.header):null,t("div",K(c))])])})])})):p.value.emptyResult:L.value?[V(),N()]:p.value.emptyHistory)}});export{Qe as default};
